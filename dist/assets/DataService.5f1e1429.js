import{m as j,r as s,c as T,u as de,o as oe}from"./index.772c5328.js";let ce={apiKey:"AIzaSyBPh0DVqo7Gf6r_CK3z0tQLdGEipGkb3Sw",authDomain:"spk-dosbingskripsi.firebaseapp.com",databaseURL:"https://spk-dosbingskripsi-default-rtdb.firebaseio.com",projectId:"spk-dosbingskripsi",storageBucket:"spk-dosbingskripsi.appspot.com",messagingSenderId:"826817552519",appId:"1:826817552519:web:5d49731d3592c7d65e5822",measurementId:"G-7SQ02HW0CM"};j.initializeApp(ce);const C=j.firestore();function Ke(){const v=C.collection("kriteria"),h=C.collection("alternatif"),w=C.collection("chatting"),k=C.collection("saw2"),E=C.collection("users2");var aa=C.batch();const d=s([]),m=s([]),ea=s(null),ia=s(null),ra=s(null),ta=s(null),o=s(null),t=s([]),D=s([]),n=s(null),ua=s(null),sa=s(null),_=s(null),na=T(()=>{if(t.value){if(y(2e3),d.value){y(2e3);for(var a=0;a<_.value;a++)for(var e=0;e<o.value;e++)o.value===3?t.value[a].subKriteria[e]=d.value[e].subKriteria.filter(i=>i.idSubKriteria===t.value[a].kriteria[0].idSubKriteria||i.idSubKriteria===t.value[a].kriteria[1].idSubKriteria||i.idSubKriteria===t.value[a].kriteria[2].idSubKriteria):o.value===4?t.value[a].subKriteria[e]=d.value[e].subKriteria.filter(i=>i.idSubKriteria===t.value[a].kriteria[0].idSubKriteria||i.idSubKriteria===t.value[a].kriteria[1].idSubKriteria||i.idSubKriteria===t.value[a].kriteria[2].idSubKriteria||i.idSubKriteria===t.value[a].kriteria[3].idSubKriteria):o.value===5?t.value[a].subKriteria[e]=d.value[e].subKriteria.filter(i=>i.idSubKriteria===t.value[a].kriteria[0].idSubKriteria||i.idSubKriteria===t.value[a].kriteria[1].idSubKriteria||i.idSubKriteria===t.value[a].kriteria[2].idSubKriteria||i.idSubKriteria===t.value[a].kriteria[3].idSubKriteria||i.idSubKriteria===t.value[a].kriteria[4].idSubKriteria):o.value===6?t.value[a].subKriteria[e]=d.value[e].subKriteria.filter(i=>i.idSubKriteria===t.value[a].kriteria[0].idSubKriteria||i.idSubKriteria===t.value[a].kriteria[1].idSubKriteria||i.idSubKriteria===t.value[a].kriteria[2].idSubKriteria||i.idSubKriteria===t.value[a].kriteria[3].idSubKriteria||i.idSubKriteria===t.value[a].kriteria[4].idSubKriteria||i.idSubKriteria===t.value[a].kriteria[5].idSubKriteria):o.value===7?t.value[a].subKriteria[e]=d.value[e].subKriteria.filter(i=>i.idSubKriteria===t.value[a].kriteria[0].idSubKriteria||i.idSubKriteria===t.value[a].kriteria[1].idSubKriteria||i.idSubKriteria===t.value[a].kriteria[2].idSubKriteria||i.idSubKriteria===t.value[a].kriteria[3].idSubKriteria||i.idSubKriteria===t.value[a].kriteria[4].idSubKriteria||i.idSubKriteria===t.value[a].kriteria[5].idSubKriteria||i.idSubKriteria===t.value[a].kriteria[6].idSubKriteria):o.value===8&&(t.value[a].subKriteria[e]=d.value[e].subKriteria.filter(i=>i.idSubKriteria===t.value[a].kriteria[0].idSubKriteria||i.idSubKriteria===t.value[a].kriteria[1].idSubKriteria||i.idSubKriteria===t.value[a].kriteria[2].idSubKriteria||i.idSubKriteria===t.value[a].kriteria[3].idSubKriteria||i.idSubKriteria===t.value[a].kriteria[4].idSubKriteria||i.idSubKriteria===t.value[a].kriteria[5].idSubKriteria||i.idSubKriteria===t.value[a].kriteria[6].idSubKriteria||i.idSubKriteria===t.value[a].kriteria[7].idSubKriteria))}}else console.log("gagal");return t.value}),la=T(()=>{if(n.value&&d.value)for(var a=0;a<o.value;a++)o.value===3?n.value.subKriteria[a]=d.value[a].subKriteria.filter(e=>e.idSubKriteria===n.value.kriteria[0].idSubKriteria||e.idSubKriteria===n.value.kriteria[1].idSubKriteria||e.idSubKriteria===n.value.kriteria[2].idSubKriteria):o.value===4?n.value.subKriteria[a]=d.value[a].subKriteria.filter(e=>e.idSubKriteria===n.value.kriteria[0].idSubKriteria||e.idSubKriteria===n.value.kriteria[1].idSubKriteria||e.idSubKriteria===n.value.kriteria[2].idSubKriteria||e.idSubKriteria===n.value.kriteria[3].idSubKriteria):o.value===5?n.value.subKriteria[a]=d.value[a].subKriteria.filter(e=>e.idSubKriteria===n.value.kriteria[0].idSubKriteria||e.idSubKriteria===n.value.kriteria[1].idSubKriteria||e.idSubKriteria===n.value.kriteria[2].idSubKriteria||e.idSubKriteria===n.value.kriteria[3].idSubKriteria||e.idSubKriteria===n.value.kriteria[4].idSubKriteria):o.value===6?n.value.subKriteria[a]=d.value[a].subKriteria.filter(e=>e.idSubKriteria===n.value.kriteria[0].idSubKriteria||e.idSubKriteria===n.value.kriteria[1].idSubKriteria||e.idSubKriteria===n.value.kriteria[2].idSubKriteria||e.idSubKriteria===n.value.kriteria[3].idSubKriteria||e.idSubKriteria===n.value.kriteria[4].idSubKriteria||e.idSubKriteria===n.value.kriteria[5].idSubKriteria):o.value===7&&(n.value.subKriteria[a]=d.value[a].subKriteria.filter(e=>e.idSubKriteria===n.value.kriteria[0].idSubKriteria||e.idSubKriteria===n.value.kriteria[1].idSubKriteria||e.idSubKriteria===n.value.kriteria[2].idSubKriteria||e.idSubKriteria===n.value.kriteria[3].idSubKriteria||e.idSubKriteria===n.value.kriteria[4].idSubKriteria||e.idSubKriteria===n.value.kriteria[5].idSubKriteria||e.idSubKriteria===n.value.kriteria[6].idSubKriteria||e.idSubKriteria===n.value.kriteria[7].idSubKriteria));return n.value}),da=s([]),oa=s(null),B=s([]),ca=s([]),G=s(null),ba=T(()=>{if(S.value&&S.value.skripsi.pembimbing!==""){var a=null;a=t.value.filter(e=>e.idAlternatif===S.value.skripsi.pembimbing),G.value=a[0].namaDosen.gelarDepan+" "+a[0].namaDosen.namaDepan+" "+a[0].namaDosen.namaBelakang+", "+a[0].namaDosen.gelarBelakang}return G.value}),z=s(null),Ka=T(()=>{if(J.value){for(var a=[],e=0;e<U.value[0].applicationsAccept.length;e++)a.push(B.value.filter(i=>i.idUsers===U.value[0].applicationsAccept[e]));P.value=a}return z.value}),U=s(null),J=T(()=>(S.value&&p(S.value.user.userEmail).get().then(a=>{let e=[],i=a.id,u=a.data();e.push({id:i,applicationsAccept:u.applicationsAccept,applicationsTotal:u.applicationsTotal,messagesUnreadDosen:u.messagesUnreadDosen}),U.value=e}),U.value)),pa=s(null),A=s({idGroupChat:null,groupName:null,messagesUnreadUser:[],messages:null,done:!1}),fa=()=>{A.value.idGroupChat=null,A.value.groupName=null,A.value.messagesUnreadUser=0,A.value.messages=null,A.value.done=!1},va=async a=>{let e=[];await a.forEach(i=>{let u=i.id,r=i.data();e.push({idKriteria:u,namaKriteria:r.namaKriteria,jenisKriteria:r.jenisKriteria,bobotKriteria:r.bobotKriteria,subKriteria:r.subKriteria})}),d.value=e,o.value=d.value.length},Sa=async a=>{let e=[];await a.forEach(i=>{let u=i.id,r=i.data();e.push({idKriteria:u,namaKriteria:r.namaKriteria,jenisKriteria:r.jenisKriteria,bobotKriteria:r.bobotKriteria,subKriteria:r.subKriteria})}),m.value=e,Na()},ha=async a=>{let e=[];await a.forEach(i=>{let u=i.id,r=i.data();e.push({idAlternatif:u,namaDosen:r.namaDosen,nidn:r.nidn,skripsi:r.skripsi,kriteria:r.kriteria,subKriteria:[],gender:r.gender,isVerify:r.isVerify})}),t.value=e,_.value=t.value.length},ga=async a=>{let e=[];await a.forEach(i=>{let u=i.id,r=i.data();e.push({idAlternatif:u,namaDosen:r.namaDosen,nidn:r.nidn,skripsi:r.skripsi,kriteria:r.kriteria,subKriteria:[],gender:r.gender})}),D.value=e,Ta()},ka=async a=>{let e=[];await a.forEach(i=>{let u=i.id,r=i.data();e.push({idSaw:u,namaDosen:r.namaDosen,total:r.total})}),da.value=e},ma=async a=>{let e=[];await a.forEach(i=>{let u=i.id,r=i.data();e.push({idUsers:u,profile:r.profile,skripsi:r.skripsi,user:r.user})}),B.value=e},Da=()=>{ra.value=v.orderBy("namaKriteria","asc").onSnapshot(va)},Aa=()=>{ta.value=v.orderBy("bobotKriteria","desc").onSnapshot(Sa)},ya=()=>{ua.value=h.orderBy("namaDosen.namaDepan","asc").onSnapshot(ha)},Ca=()=>{sa.value=h.orderBy("namaDosen.namaDepan","asc").onSnapshot(ga)},wa=()=>{oa.value=k.orderBy("namaDosen.namaDepan","asc").onSnapshot(ka)},Ua=()=>{ca.value=E.orderBy("user.userName","asc").onSnapshot(ma)},R=s([]),O=s([]),Q=s([]),q=s([]),Na=()=>{let a=m.value.length,e=[],i=[];if(a>3){for(var u=0;u<3;u++)e.push(m.value[u]);for(var r=0;r<Number(a-3);r++)i.push(m.value[Number(3+r)])}else for(var l=0;l<3;l++)e.push(m.value[l]);R.value=e,O.value=i},Ta=()=>{let a=D.value.length,e=[],i=[];if(a>4){for(var u=0;u<4;u++)e.push(D.value[u]);for(var r=0;r<Number(a-4);r++)i.push(D.value[Number(4+r)])}else for(var l=0;l<4;l++)e.push(D.value[l]);Q.value=e,q.value=i};function Ea(){return v}function _a(a){return v.doc(a)}function Ba(a){return v.add(a)}function Ga(a,e){return v.doc(a).set(e)}function Ia(a,e){return v.doc(a).update(e)}function Pa(a){return v.doc(a).delete()}function Ma(){return h}function xa(a){return h.doc(a)}function Fa(a){return h.doc(a).delete()}function La(a,e){return h.doc(a).set(e)}function Va(a,e){return h.doc(a).update(e)}function I(){return w}function p(a){return w.doc(a)}function za(a,e){return w.doc(a).set(e)}function Ja(a,e){return w.doc(a).update(e)}function Ra(a){return w.doc(a).delete()}function Oa(a){return k.add(a)}function Qa(){return k}function qa(a){return k.doc(a)}function Ha(a,e){return k.doc(a).update(e)}function Wa(a){return k.doc(a).delete()}function $a(a){return E.doc(a)}function Xa(a,e){return E.doc(a).set(e)}function Ya(a,e){return E.doc(a).update(e)}const H=s(null),Za=s(null),ja=s(null),W=s([]),$=s([]),X=s([]),P=s([]),M=s([]),K=s([]),N=s([]),x=s([]),F=s(null),Y=s([]),{thisUser:S}=de();function y(a){return new Promise(e=>{setTimeout(e,a)})}const ae=()=>{let a=[],e=[];for(var i=0;i<N.value.length;i++)N.value[i][0]!==0?a.push(N.value[i][0]):a.push([]),e.push(!1);y(1e3);for(var u=0;u<a.length;u++)a[u].length!==0&&a.splice(u,1,a[u].filter(l=>l.userId===S.value.user.userId));y(1e3);for(var r=0;r<a.length;r++)a[r].length!==0?(e.splice(r,1,a[r][0].isFav),a.splice(r,1,a[r][0].messagesUnreadUser)):(a.splice(r,1,0),e.splice(r,1,!1));x.value=a,Y.value=e},ee=async a=>{const e=s([]);let i=[];await a.forEach(r=>{let l=r.id,c=r.data();i.push({idGroupChat:l,alternatif:c.alternatif,messagesLatest:c.messagesLatest,participants:c.participants,messagesUnreadDosen:c.messagesUnreadDosen,unread:null,isVerify:c.isVerify})}),y(1e3),await(async()=>{for(var r=0;r<i.length;r++){let l=[];p(i[r].idGroupChat).collection("participants").get().then(c=>{let g=[];c.forEach(b=>{g.push(b.data())}),l.splice(r,1,g)}),e.value.splice(r,1,l)}})().then(()=>{y(1e3)}).then(()=>{N.value=e.value,W.value=i})},ie=async a=>{let e=[];await a.forEach(i=>{let u=i.id,r=i.data();e.push({id:u,alternatif:r.alternatif})}),$.value=e},re=a=>{let e=[];a.forEach(i=>{let u=i.data();e.push(u)}),X.value=e},te=a=>{let e=[];a.forEach(i=>{let u=i.data();e.push(u)}),P.value=e},L=async()=>{H.value=I().orderBy("messagesLatest.createdAt","desc").onSnapshot(ee)},ue=async()=>{H.value=I().orderBy("alternatif.namaDosen.namaDepan","asc").onSnapshot(ie)},Z=async(a,e)=>{p(e).get().then(async i=>{i.exists&&await p(e).collection("participants").doc(S.value.user.userId).get().then(u=>{u.exists&&p(e).collection("participants").doc(S.value.user.userId).update({messagesUnreadUser:0})})}),x.value.splice(a,1,0)},se=async(a,e,i,u,r)=>{K.value.idGC=e,K.value.namaDosen=i,K.value.gender=u,K.value.selectedUser=r,F.value=!0,await L().then(()=>Z(a,e)),p(K.value.idGC).collection("messages").orderBy("createdAt","asc").onSnapshot(l=>{let c=[];l.forEach(g=>{let b=g.id,f=g.data();c.push({id:b,createdAt:f.createdAt,date:f.date,profile:f.profile,text:f.text,time:f.time,userId:f.userId,userName:f.userName,userNim:f.userNim,isFirstToday:f.isFirstToday})}),M.value=c}),V(e)},ne=async(a,e,i,u)=>{K.value.idGC=a,K.value.namaDosen=e,K.value.gender=i,K.value.selectedUser=u,F.value=!0,await L(),p(K.value.idGC).collection("messages").orderBy("createdAt","asc").onSnapshot(r=>{let l=[];r.forEach(c=>{let g=c.id,b=c.data();l.push({id:g,createdAt:b.createdAt,date:b.date,profile:b.profile,text:b.text,time:b.time,userId:b.userId,userName:b.userName,userNim:b.userNim,isFirstToday:b.isFirstToday})}),M.value=l}),V(a)},V=a=>{Za.value=p(a).collection("participants").orderBy("userName","asc").onSnapshot(re)},le=a=>{ja.value=p(a).collection("applications").orderBy("createdAt","desc").onSnapshot(te)};return oe(()=>{Da(),ya(),Aa(),Ca(),Ua()}),{kriteria:d,kriteriaTeratas:m,kriteriaPart1:R,kriteriaPart2:O,hitungJmlKriteria:o,hitungJmlSubKriteria:ia,getAllKriteria:Ea,addKriteria:Ba,setKriteria:Ga,updateKriteria:Ia,deleteKriteria:Pa,kriteriaEdit:ea,alternatif:t,alternatifTeratas:D,alternatifPart1:Q,alternatifPart2:q,hitungJmlAlternatif:_,isRefAlternatif:na,getAllAlternatif:Ma,getDocAlternatif:xa,deleteAlternatif:Fa,setAlternatif:La,updateAlternatif:Va,alternatifEdit:n,isRefAlternatifEdit:la,getAllChatting:I,getDocChatting:p,setChatting:za,updateChatting:Ja,deleteChatting:Ra,getDocKriteria:_a,batch:aa,getDocSaw:qa,updateSaw:Ha,getAllSaw:Qa,getDataSaw:wa,addSaw:Oa,deleteSaw:Wa,groupChat:W,groupChat2:$,participants:X,messages:M,currentOption:K,unreadMsgGroupChat:N,newArrUnread:x,isCliked:F,newFav:Y,filterUnreadOnly:ae,getDataGroupChat:L,getDataGroupChat2:ue,resetMyUnread:Z,jumpTo:se,jumpTo2:ne,getDataParticipant:V,setUsers:Xa,updateUsers:Ya,applications:P,getApplications:le,getDocUsers:$a,afterDosbing:ba,dosbing:G,afterChat:J,thisChat:U,users:B,afterApplicationsAccept:Ka,applicationsAccept:z,isNewMsg:pa,thisNewMsg:A,resetNewMsg:fa}}export{Ke as u};
